<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" async=""></script>
    <script>
      window.OneSignal = window.OneSignal || [];
      OneSignal.push(function() {
        OneSignal.init({
          appId: "3e056ceb-bf3c-4ca1-b0a6-f12b2b8319bc",
        });
      });
    </script> -->
  </head>
<body>
  <h1>Hello, Web Push</h1>
  <button type="button" onclick="sendFlareLaneDemoNotification()">Send Demo Notification</button>
  
  <script src="https://cdn.flarelane.com/WebSDK-staging.js"></script>
  <script>
      FlareLane.initialize({ projectId: "249f20f0-2b55-4b67-bf65-51b365296e3e" });
  </script>

  <script>function sendFlareLaneDemoNotification(){try{const e={API_URL:"https://staging-service-api.flarelane.com/send-demo-notification",DRAFT_STORE_ID:"flarelane_dndly",delayTime:3e3,isIOS:/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,fetch:{method:"POST",headers:{"Content-Type":"application/json"}}},t={IS_IOS:"iOS 웹 푸시는 지원 예정입니다. 안드로이드 폰이나 PC 환경에서 다시 시도해보세요.",WAIT_INITIALIZE:"잠시 후 구독 팝업이 노출됩니다. 조금만 기다려주세요!",SUBSCRIBE_FALSE:"왼쪽 아래 종 모양 버튼을 클릭하여 알림 구독을 먼저 진행하세요."};if(e.isIOS)return void alert(t.IS_IOS);if(!FlareLane.isInitialized)return void alert(t.WAIT_INITIALIZE);const i=Number(localStorage.getItem(e.DRAFT_STORE_ID)),a=(new Date).getTime();if(i&&a-i<e.delayTime)return;FlareLane.getIsSubscribed(i=>{i?FlareLane.getDeviceId((function(i){fetch&&(i?fetch(e.API_URL,{method:e.fetch.method,headers:e.fetch.headers,body:JSON.stringify({deviceId:i})}).then((function(){})).catch((function(){})):alert(t.SUBSCRIBE_FALSE))})):alert(t.SUBSCRIBE_FALSE)}),localStorage.setItem(e.DRAFT_STORE_ID,String(a))}catch{}}</script>
</body>
</html>
